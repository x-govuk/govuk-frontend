{"version":3,"file":"skip-link.mjs","sources":["../../../../src/govuk/components/skip-link/skip-link.mjs"],"sourcesContent":["/**\n * Skip link component\n */\nexport class SkipLink {\n  /** @private */\n  $module\n\n  /**\n   * @private\n   * @type {HTMLElement | null}\n   */\n  $linkedElement = null\n\n  /** @private */\n  linkedElementListener = false\n\n  /**\n   *\n   * @param {Element} $module - HTML element to use for skip link\n   */\n  constructor ($module) {\n    if (!($module instanceof HTMLAnchorElement) || !document.body.classList.contains('govuk-frontend-supported')) {\n      return this\n    }\n\n    this.$module = $module\n\n    // Check for linked element\n    const $linkedElement = this.getLinkedElement()\n    if (!$linkedElement) {\n      return\n    }\n\n    this.$linkedElement = $linkedElement\n    this.$module.addEventListener('click', () => this.focusLinkedElement())\n  }\n\n  /**\n   * Get linked element\n   *\n   * @private\n   * @returns {HTMLElement | null} $linkedElement - DOM element linked to from the skip link\n   */\n  getLinkedElement () {\n    const linkedElementId = this.getFragmentFromUrl()\n    if (!linkedElementId) {\n      return null\n    }\n\n    return document.getElementById(linkedElementId)\n  }\n\n  /**\n   * Focus the linked element\n   *\n   * Set tabindex and helper CSS class. Set listener to remove them on blur.\n   *\n   * @private\n   */\n  focusLinkedElement () {\n    if (!this.$linkedElement.getAttribute('tabindex')) {\n      // Set the element tabindex to -1 so it can be focused with JavaScript.\n      this.$linkedElement.setAttribute('tabindex', '-1')\n      this.$linkedElement.classList.add('govuk-skip-link-focused-element')\n\n      // Add listener for blur on the focused element (unless the listener has previously been added)\n      if (!this.linkedElementListener) {\n        this.$linkedElement.addEventListener('blur', () => this.removeFocusProperties())\n        this.linkedElementListener = true\n      }\n    }\n\n    this.$linkedElement.focus()\n  }\n\n  /**\n   * Remove the tabindex that makes the linked element focusable because the element only needs to be\n   * focusable until it has received programmatic focus and a screen reader has announced it.\n   *\n   * Remove the CSS class that removes the native focus styles.\n   *\n   * @private\n   */\n  removeFocusProperties () {\n    this.$linkedElement.removeAttribute('tabindex')\n    this.$linkedElement.classList.remove('govuk-skip-link-focused-element')\n  }\n\n  /**\n   * Get fragment from URL\n   *\n   * Extract the fragment (everything after the hash symbol) from a URL, but not including\n   * the symbol.\n   *\n   * @private\n   * @returns {string | undefined} Fragment from URL, without the hash symbol\n   */\n  getFragmentFromUrl () {\n    // Bail if the anchor link doesn't have a hash\n    if (!this.$module.hash) {\n      return\n    }\n\n    return this.$module.hash.split('#').pop()\n  }\n}\n"],"names":["SkipLink","constructor","$module","$linkedElement","linkedElementListener","HTMLAnchorElement","document","body","classList","contains","getLinkedElement","addEventListener","focusLinkedElement","linkedElementId","getFragmentFromUrl","getElementById","getAttribute","setAttribute","add","removeFocusProperties","focus","removeAttribute","remove","hash","split","pop"],"mappings":"AAAA;AACA;AACA;AACO,MAAMA,QAAQ,CAAC;AAapB;AACF;AACA;AACA;EACEC,WAAWA,CAAEC,OAAO,EAAE;AAhBtB;AAAA,IAAA,IAAA,CACAA,OAAO,GAAA,KAAA,CAAA,CAAA;AAEP;AACF;AACA;AACA;IAHE,IAIAC,CAAAA,cAAc,GAAG,IAAI,CAAA;AAErB;IAAA,IACAC,CAAAA,qBAAqB,GAAG,KAAK,CAAA;AAO3B,IAAA,IAAI,EAAEF,OAAO,YAAYG,iBAAiB,CAAC,IAAI,CAACC,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACC,QAAQ,CAAC,0BAA0B,CAAC,EAAE;AAC5G,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;IAEA,IAAI,CAACP,OAAO,GAAGA,OAAO,CAAA;;AAEtB;AACA,IAAA,MAAMC,cAAc,GAAG,IAAI,CAACO,gBAAgB,EAAE,CAAA;IAC9C,IAAI,CAACP,cAAc,EAAE;AACnB,MAAA,OAAA;AACF,KAAA;IAEA,IAAI,CAACA,cAAc,GAAGA,cAAc,CAAA;AACpC,IAAA,IAAI,CAACD,OAAO,CAACS,gBAAgB,CAAC,OAAO,EAAE,MAAM,IAAI,CAACC,kBAAkB,EAAE,CAAC,CAAA;AACzE,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEF,EAAAA,gBAAgBA,GAAI;AAClB,IAAA,MAAMG,eAAe,GAAG,IAAI,CAACC,kBAAkB,EAAE,CAAA;IACjD,IAAI,CAACD,eAAe,EAAE;AACpB,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;AAEA,IAAA,OAAOP,QAAQ,CAACS,cAAc,CAACF,eAAe,CAAC,CAAA;AACjD,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACED,EAAAA,kBAAkBA,GAAI;IACpB,IAAI,CAAC,IAAI,CAACT,cAAc,CAACa,YAAY,CAAC,UAAU,CAAC,EAAE;AACjD;MACA,IAAI,CAACb,cAAc,CAACc,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,CAAA;MAClD,IAAI,CAACd,cAAc,CAACK,SAAS,CAACU,GAAG,CAAC,iCAAiC,CAAC,CAAA;;AAEpE;AACA,MAAA,IAAI,CAAC,IAAI,CAACd,qBAAqB,EAAE;AAC/B,QAAA,IAAI,CAACD,cAAc,CAACQ,gBAAgB,CAAC,MAAM,EAAE,MAAM,IAAI,CAACQ,qBAAqB,EAAE,CAAC,CAAA;QAChF,IAAI,CAACf,qBAAqB,GAAG,IAAI,CAAA;AACnC,OAAA;AACF,KAAA;AAEA,IAAA,IAAI,CAACD,cAAc,CAACiB,KAAK,EAAE,CAAA;AAC7B,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACED,EAAAA,qBAAqBA,GAAI;AACvB,IAAA,IAAI,CAAChB,cAAc,CAACkB,eAAe,CAAC,UAAU,CAAC,CAAA;IAC/C,IAAI,CAAClB,cAAc,CAACK,SAAS,CAACc,MAAM,CAAC,iCAAiC,CAAC,CAAA;AACzE,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACER,EAAAA,kBAAkBA,GAAI;AACpB;AACA,IAAA,IAAI,CAAC,IAAI,CAACZ,OAAO,CAACqB,IAAI,EAAE;AACtB,MAAA,OAAA;AACF,KAAA;AAEA,IAAA,OAAO,IAAI,CAACrB,OAAO,CAACqB,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,EAAE,CAAA;AAC3C,GAAA;AACF;;;;"}